/**
 * beelink-mobile
 * @version v1.0.0 - 2013-11-14
 * @link 
 * @author 
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.$debug=!0;var userAgent=navigator.userAgent.toLowerCase();setTimeout(function(){angular.bootstrap(document,["$app"])}),angular.module("$app",["ajoslin.mobile-navigate","cordova.analytics"]).service("console",["$window",function(a){return angular.$debug?a.console:{log:function(){},warn:function(){},error:function(){}}}]).constant("workouts",[{id:"jumping-jacks",name:"Jumping Jacks"},{id:"wall-sit",name:"Wall Sit"},{id:"push-up",name:"Push Up"},{id:"abdominal-crunch",name:"Abdominal Crunch"},{id:"step-up-onto-chair",name:"Step-Up onto Chair"},{id:"squat",name:"Squat"},{id:"triceps-dip-on-chair",name:"Triceps Dip on Chair"},{id:"plank",name:"Plank"},{id:"high-knees-running-in-place",name:"High Knees Running in Place"},{id:"lunge",name:"Lunge"},{id:"push-up-and-rotation",name:"Push-up and Rotation"},{id:"side-plank",name:"Side Plank"}]).value("workout",{duration:420,rest:{name:"Rest",time:.25},list:["jumping-jacks","wall-sit","push-up","abdominal-crunch","step-up-onto-chair","squat","triceps-dip-on-chair","plank","high-knees-running-in-place","lunge","push-up-and-rotation","side-plank"]}).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/step/:step",{templateUrl:"views/step.html",controller:"StepsCtrl"}).when("/rest/:step",{templateUrl:"views/rest.html",controller:"RestCtrl"}).when("/done",{templateUrl:"views/done.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).run(["console","$rootScope","$location","$navigate","$route","$analytics",function(a,b,c,d,e,f){b.$location=c,b.$navigate=d,f.init("UA-1813303-9",10),f.trackEvent("application","start"),setTimeout(function(){navigator.splashscreen&&navigator.splashscreen.hide()},150)}]),window.addEventListener("load",function(){new FastClick(document.body)},!1),angular.module("$app").constant("numbers",{ones:["","one","two","three","four","five","six","seven","eight","nine"],tens:["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],teens:["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]}).filter("firstWord",function(){return function(a){return a.split(" ").shift()}}).filter("followingWords",function(){return function(a){return a.split(" ").slice(1).join(" ")}}).filter("numberAsText",["numbers",function(a){return function(b){return b?10>b?a.ones[b]:b>=10&&20>b?a.teens[b-10]:a.tens[Math.floor(b/10)]+" "+a.ones[b%10]:"zero"}}]),angular.module("$app").service("audioFiles",["$window",function(a){var b=a.Media||a.Audio,c={tick:{src:"./sounds/tick.wav",volume:.35},rest:{src:"./sounds/tick-rest.wav",volume:.05},start:{src:"./sounds/newmail.wav",volume:.75},stop:{src:"./sounds/mailsent.wav",volume:.75},skip:{src:"./sounds/mailerror.wav",volume:1}};angular.forEach(c,function(a){a.audio=new b(a.src),a.volume&&(a.audio.volume=a.volume)}),this.play=function(a){return c[a]?(c[a].audio.play(),void 0):!1}}]).factory("$countdown",function(){function a(a){var b={interval:1e3},c=function(a){return this.options=angular.extend({},b,a),this.init(a)};return c.prototype={constructor:c,init:function(){var a=this,b=this.options,c=this.options.scope;return c[b.prop]=parseInt(b.duration||c[b.prop],10),this.start(),c.$on("$destroy",function(){a.stop()}),this},toggle:function(){var a=this.options,b=this.options.scope;b[a.prop]&&(this.interval?this.stop():this.start())},start:function(){var a=this,b=this.options,c=this.options.scope;this.interval=setInterval(function(){c.$apply(function(){c[b.prop]--,c[b.prop]?angular.isFunction(b.tick)&&b.tick.call(null):(a.stop(),angular.isFunction(b.callback)&&b.callback.call(null))})},b.interval)},stop:function(){clearInterval(this.interval),this.interval=void 0}},new c(a)}return a}),angular.module("cordova.analytics",[]).service("$analytics",["$window","$q",function(a,b){var c=function(c,d){var e=b.defer();return a.cordova&&a.cordova.exec?(a.cordova.exec(function(a){e.resolve(a)},function(a){e.reject(a)},"GAPlugin",c,d),e.promise):void 0};this.init=function(a,b){return c("initGA",[a,b||10])},this.trackEvent=function(a,b,d,e){return c("trackEvent",[a,b,d||"",e||-1])},this.trackPage=function(a){return c("trackPage",[a])},this.setVariable=function(a,b){return c("setVariable",[a,b])},this.destroy=function(){return c("exitGA",[])}}]),angular.module("$app").controller("AppCtrl",["$scope","$location","$navigate","$routeParams","$countdown","audioFiles","workouts","workout",function(a,b,c){a.exit=function(){c.go("/","cubeToLeft")}}]).controller("MainCtrl",["$scope","$location","$navigate","$routeParams","$countdown","$analytics","audioFiles","workouts","workout",function(a,b,c,d,e,f,g,h,i){a.timer=3,a.next="/step/1",a.countdown=!1,a.workout=i,a.startText=function(){return a.countdown?a.timer:"Start"},a.start=function(){g.play("tick"),a.countdown=e({scope:a,prop:"timer",duration:3,tick:function(){g.play("tick")},callback:function(){g.play("start"),c.go(a.next,"glueTopFromBottom")}}),f.trackEvent("workout","start")},a.restart=function(){g.play("skip"),c.go(a.next,"glueTopFromBottom"),f.trackEvent("workout","restart")},a.minus=function(){i.duration<=240||(i.duration-=60)},a.plus=function(){i.duration>=1200||(i.duration+=60)}}]),angular.module("$app").controller("StepsCtrl",["$scope","$location","$navigate","$routeParams","$countdown","$analytics","audioFiles","workouts","workout",function(a,b,c,d,e,f,g,h,i){a.step=1*d.step,a.total=i.list.length,a.next=a.step<a.total?"/rest/"+a.step:"/done";var j=i.list[a.step-1];a.workout=h.filter(function(a){return a.id===j}).pop(),a.duration=parseInt(i.duration/a.total*(1-i.rest.time),10),a.timer=a.duration;var k=e({scope:a,prop:"timer",duration:a.duration,tick:function(){g.play("tick")},callback:function(){g.play("stop"),a.skip()}});a.paused=!1,a.pauseText=function(){return a.paused?"Play":"Pause"},a.pause=function(){g.play("skip"),k.toggle(),a.paused=!a.paused},a.skipText=function(){return a.paused?"Restart":"Skip"},a.skip=function(){g.play("skip"),a.paused?(a.timer=a.duration,a.pause()):c.go(a.next,"glueTopFromBottom"),f.trackEvent("workout","skip")}}]),angular.module("$app").controller("RestCtrl",["$scope","$location","$navigate","$routeParams","$countdown","audioFiles","workouts","workout",function(a,b,c,d,e,f,g,h){a.step=1*d.step,a.total=h.list.length,a.next="/step/"+(a.step+1),a.rest=h.rest;var i=h.list[a.step];a.workout=g.filter(function(a){return a.id===i}).pop(),a.duration=parseInt(h.duration/h.list.length*h.rest.time,10),a.timer=a.duration;var j=e({scope:a,prop:"timer",duration:a.duration,tick:function(){f.play("rest")},callback:function(){f.play("start"),a.skip()}});a.paused=!1,a.pauseText=function(){return a.paused?"Play":"Pause"},a.pause=function(){f.play("skip"),j.toggle(),a.paused=!a.paused},a.skip=function(){f.play("skip"),c.go(a.next,"glueBottomFromTop")}}]);